---
apiVersion: pkg.internal/v1beta1
kind: XStorage
metadata:
  labels:
    crossplane.io/claim-name: alice-004
    crossplane.io/claim-namespace: default
  name: alice-004
spec:
  bucketAccessRequests:
  - bucketName: bob-shared-004
    permission: ReadWrite
  buckets:
  - bucketName: alice-004
    discoverable: false
  - bucketName: alice-shared-004
    discoverable: true
  owner: alice-004
status:
  conditions:
  - lastTransitionTime: "2024-01-01T00:00:00Z"
    message: 'Unready resources: api-key-alice-004, application-alice-004, bucket-policy-alice-004,
      and 2 more'
    reason: Creating
    status: "False"
    type: Ready
---
apiVersion: iam.scaleway.upbound.io/v1alpha1
kind: ApiKey
metadata:
  annotations:
    crossplane.io/composition-resource-name: api-key-alice-004
  labels:
    crossplane.io/composite: alice-004
  name: alice-004
  ownerReferences:
  - apiVersion: pkg.internal/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: XStorage
    name: alice-004
    uid: ""
spec:
  forProvider:
    applicationIdRef:
      name: alice-004
  providerConfigRef:
    name: storage-scaleway
  writeConnectionSecretToRef:
    name: alice-004
    namespace: default
---
apiVersion: iam.scaleway.upbound.io/v1alpha1
kind: Application
metadata:
  annotations:
    crossplane.io/composition-resource-name: application-alice-004
  labels:
    crossplane.io/composite: alice-004
  name: alice-004
  ownerReferences:
  - apiVersion: pkg.internal/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: XStorage
    name: alice-004
    uid: ""
spec:
  forProvider:
    name: alice-004
  providerConfigRef:
    name: storage-scaleway
---
apiVersion: object.scaleway.upbound.io/v1alpha1
kind: Bucket
metadata:
  annotations:
    crossplane.io/composition-resource-name: bucket-alice-004
    xstorages.pkg.internal/bucket-name: alice-004
    xstorages.pkg.internal/discoverable: "False"
    xstorages.pkg.internal/owner: alice-004
  labels:
    crossplane.io/composite: alice-004
  name: alice-004-alice-004
  ownerReferences:
  - apiVersion: pkg.internal/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: XStorage
    name: alice-004
    uid: ""
spec:
  forProvider:
    name: alice-004-alice-004-abcde-fghij
  providerConfigRef:
    name: storage-scaleway
---
apiVersion: object.scaleway.upbound.io/v1alpha1
kind: Bucket
metadata:
  annotations:
    crossplane.io/composition-resource-name: bucket-alice-shared-004
    xstorages.pkg.internal/bucket-name: alice-shared-004
    xstorages.pkg.internal/discoverable: "True"
    xstorages.pkg.internal/owner: alice-004
  labels:
    crossplane.io/composite: alice-004
  name: alice-004-alice-shared-004
  ownerReferences:
  - apiVersion: pkg.internal/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: XStorage
    name: alice-004
    uid: ""
spec:
  forProvider:
    name: alice-004-alice-shared-004-abcde-fghij
  providerConfigRef:
    name: storage-scaleway
---
apiVersion: object.scaleway.upbound.io/v1alpha1
kind: Policy
metadata:
  annotations:
    crossplane.io/composition-resource-name: bucket-policy-alice-004
  labels:
    crossplane.io/composite: alice-004
  name: alice-004
  ownerReferences:
  - apiVersion: pkg.internal/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: XStorage
    name: alice-004
    uid: ""
spec:
  forProvider:
    bucket: alice-004-alice-004-abcde-fghij
    policy: |-
      {
        "Version": "2023-04-17",
        "Statement": [
          {
            "Effect": "Allow",
            "Principal": {
              "SCW": [
                "user_id:user_id",
                "application_id:application_id_alice-004"
              ]
            },
            "Action": [
              "s3:*"
            ],
            "Resource": [
              "alice-004-alice-004-abcde-fghij",
              "alice-004-alice-004-abcde-fghij/*"
            ]
          },
          {
            "Effect": "Allow",
            "Principal": {
              "SCW": []
            },
            "Action": [
              "s3:ListBucket",
              "s3:GetObject",
              "s3:PutObject",
              "s3:DeleteObject"
            ],
            "Resource": [
              "alice-004-alice-004-abcde-fghij",
              "alice-004-alice-004-abcde-fghij/*"
            ]
          },
          {
            "Effect": "Allow",
            "Principal": {
              "SCW": []
            },
            "Action": [
              "s3:ListBucket",
              "s3:GetObject"
            ],
            "Resource": [
              "alice-004-alice-004-abcde-fghij",
              "alice-004-alice-004-abcde-fghij/*"
            ]
          }
        ]
      }
  providerConfigRef:
    name: storage-scaleway
---
apiVersion: object.scaleway.upbound.io/v1alpha1
kind: Policy
metadata:
  annotations:
    crossplane.io/composition-resource-name: bucket-policy-alice-shared-004
  labels:
    crossplane.io/composite: alice-004
  name: alice-shared-004
  ownerReferences:
  - apiVersion: pkg.internal/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: XStorage
    name: alice-004
    uid: ""
spec:
  forProvider:
    bucket: alice-004-alice-shared-004-abcde-fghij
    policy: |-
      {
        "Version": "2023-04-17",
        "Statement": [
          {
            "Effect": "Allow",
            "Principal": {
              "SCW": [
                "user_id:user_id",
                "application_id:application_id_alice-004"
              ]
            },
            "Action": [
              "s3:*"
            ],
            "Resource": [
              "alice-004-alice-shared-004-abcde-fghij",
              "alice-004-alice-shared-004-abcde-fghij/*"
            ]
          },
          {
            "Effect": "Allow",
            "Principal": {
              "SCW": []
            },
            "Action": [
              "s3:ListBucket",
              "s3:GetObject",
              "s3:PutObject",
              "s3:DeleteObject"
            ],
            "Resource": [
              "alice-004-alice-shared-004-abcde-fghij",
              "alice-004-alice-shared-004-abcde-fghij/*"
            ]
          },
          {
            "Effect": "Allow",
            "Principal": {
              "SCW": []
            },
            "Action": [
              "s3:ListBucket",
              "s3:GetObject"
            ],
            "Resource": [
              "alice-004-alice-shared-004-abcde-fghij",
              "alice-004-alice-shared-004-abcde-fghij/*"
            ]
          }
        ]
      }
  providerConfigRef:
    name: storage-scaleway
---
apiVersion: iam.scaleway.upbound.io/v1alpha1
kind: Policy
metadata:
  annotations:
    crossplane.io/composition-resource-name: iam-policy-alice-004
  labels:
    crossplane.io/composite: alice-004
  name: alice-004
  ownerReferences:
  - apiVersion: pkg.internal/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: XStorage
    name: alice-004
    uid: ""
spec:
  forProvider:
    applicationIdRef:
      name: alice-004
    name: object-storage-full-access-alice-004
    rule:
    - organizationId: organization_id
      permissionSetNames:
      - ObjectStorageFullAccess
  providerConfigRef:
    name: storage-scaleway
