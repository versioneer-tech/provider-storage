---
apiVersion: epca.eo/v1beta1
kind: XStorage
metadata:
  name: test-bucket
spec:
  buckets:
  - name: testeroni
    owner: alice
  providerConfig: providerconfig-minio
status:
  conditions:
  - lastTransitionTime: "2024-01-01T00:00:00Z"
    reason: Available
    status: "True"
    type: Ready
---
apiVersion: minio.crossplane.io/v1
kind: Bucket
metadata:
  annotations:
    crossplane.io/composition-resource-name: bucket-0
  generateName: test-bucket-
  labels:
    crossplane.io/composite: test-bucket
  name: testeroni
  ownerReferences:
  - apiVersion: epca.eo/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: XStorage
    name: test-bucket
    uid: ""
spec:
  providerConfigRef:
    name: providerconfig-minio
---
apiVersion: minio.crossplane.io/v1
kind: Policy
metadata:
  annotations:
    crossplane.io/composition-resource-name: policy-alice.owner.testeroni
  generateName: test-bucket-
  labels:
    crossplane.io/composite: test-bucket
  name: alice.owner.testeroni
  ownerReferences:
  - apiVersion: epca.eo/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: XStorage
    name: test-bucket
    uid: ""
spec:
  forProvider:
    rawPolicy: |
      {
        "Version": "2012-10-17",
        "Statement": [
          {
            "Effect": "Allow",
            "Action": [ "s3:*" ],
            "Resource": [
              "arn:aws:s3:::testeroni",
              "arn:aws:s3:::testeroni/*"
            ]
          }
        ]
      }
  providerConfigRef:
    name: providerconfig-minio
